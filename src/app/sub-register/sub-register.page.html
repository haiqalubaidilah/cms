<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="tabs-page"></ion-back-button>
    </ion-buttons>
    <ion-title>Subject Registration</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-list>
    <ion-title *ngIf="subjects" class="ion-text-center ion-margin"
      >Session {{ userData.session }} | Semester {{ userData.sem }}</ion-title
    >
    <ion-item *ngFor="let subject of subjects">
      <ion-label>
        <h2>{{ subject.name }} ({{ subject.code }})</h2>
        <h3>Section: {{ subject.section }}</h3>
        <h3>Credit Hour: {{ subject.creditHr }}</h3>
        <h3>Contact Hour: {{ subject.contactHr }}</h3>
      </ion-label>
      <ng-container *ngFor="let isRegistered of subject.registered | keyvalue">
        <ng-container *ngIf="isRegistered.key == userData.uid">
          <ion-checkbox
            [disabled]="confirmRegistration"
            checked="{{ isRegistered.value }}"
            (ionChange)="registerSubjects(subject.id, isRegistered.value)"
          ></ion-checkbox>
        </ng-container>
      </ng-container>
    </ion-item>

    <!-- loading animation -->
    <div *ngIf="!subjects">
      <ion-skeleton-text
        animated
        style="width: 60%; line-height: 1rem; margin: 5% auto"
      ></ion-skeleton-text>
      <ion-item>
        <ion-label>
          <p>
            <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
          </p>
          <h3>
            <ion-skeleton-text animated style="width: 20%"></ion-skeleton-text>
          </h3>
          <h3>
            <ion-skeleton-text animated style="width: 20%"></ion-skeleton-text>
          </h3>
          <h3>
            <ion-skeleton-text animated style="width: 20%"></ion-skeleton-text>
          </h3>
        </ion-label>
      </ion-item>
      <ion-item>
        <ion-label>
          <p>
            <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
          </p>
          <h3>
            <ion-skeleton-text animated style="width: 20%"></ion-skeleton-text>
          </h3>
          <h3>
            <ion-skeleton-text animated style="width: 20%"></ion-skeleton-text>
          </h3>
          <h3>
            <ion-skeleton-text animated style="width: 20%"></ion-skeleton-text>
          </h3>
        </ion-label>
      </ion-item>
      <ion-item>
        <ion-label>
          <p>
            <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
          </p>
          <h3>
            <ion-skeleton-text animated style="width: 20%"></ion-skeleton-text>
          </h3>
          <h3>
            <ion-skeleton-text animated style="width: 20%"></ion-skeleton-text>
          </h3>
          <h3>
            <ion-skeleton-text animated style="width: 20%"></ion-skeleton-text>
          </h3>
        </ion-label>
      </ion-item>
      <ion-item>
        <ion-label>
          <p>
            <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
          </p>
          <h3>
            <ion-skeleton-text animated style="width: 20%"></ion-skeleton-text>
          </h3>
          <h3>
            <ion-skeleton-text animated style="width: 20%"></ion-skeleton-text>
          </h3>
          <h3>
            <ion-skeleton-text animated style="width: 20%"></ion-skeleton-text>
          </h3>
        </ion-label>
      </ion-item>
    </div>
  </ion-list>

</ion-content>

<ion-footer class="ion-no-border">
  <ion-toolbar>
    <ion-button
      class="ion-margin"
      color="primary"
      (click)="confirm()"
      expand="block"
      fill="solid"
      shape="rectangle"
    >
      {{ confirmRegistration ? 'Edit' : 'Confirm' }}
    </ion-button>
  </ion-toolbar>
</ion-footer>
